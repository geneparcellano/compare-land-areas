angular.module("app").controller("MainController",["$scope","$http","$q",function(e,n,t){function a(){var n=null;e.selected.length&&(n=_.max(e.selected,function(e){return e.sqMiles}),e.maxArea=n.sqMiles),l()}function l(){angular.forEach(e.selected,function(n,t){var a=100*n.sqMiles/e.maxArea,l=300*(a/100);5>=l&&(l=5),n.color||(n.color="#"+Math.floor(16777215*Math.random()).toString(16)),n.relativeArea=l})}e.typeFilter="Continent",e.allLand=[],e.continents=[],e.countries=[],e.states=[],e.selected=[],e.maxArea=0;var o=n.get("./data/continents.json"),r=n.get("./data/countries.json"),i=n.get("./data/states.json"),c=n.get("./data/canada.json");t.all([o,r,i,c]).then(function(n){var t=_.union(n[0].data,n[1].data,n[2].data,n[3].data);angular.forEach(t,function(e,n){e.isActive=!1}),e.allLand=_.sortBy(t,"name")}),e.$watchCollection("selected",function(e,n){a()}),e.addLand=function(n){var t=_.findWhere(e.allLand,n);t.isActive=!0,e.selected.push(n)},e.removeLand=function(n){var t=_.findWhere(e.allLand,n),a=_.filter(e.selected,function(e){return e.name!==n.name?e:void 0});t.isActive=!1,e.selected=a},e.toggleLand=function(n){var t=_.indexOf(e.selected,n);-1===t?e.addLand(n):e.removeLand(n)},e.searchLand=function(n){var t=_.indexOf(e.selected,n);-1===t&&e.addLand(n),e.searchInput=""},e.reset=function(){e.selected=[],e.search="",angular.forEach(e.allLand,function(e,n){return e.isActive?e.isActive=!1:void 0})},e.landFilterPopover={content:"Hello, World!",templateUrl:"landFilter.html",title:"Title"}}]);